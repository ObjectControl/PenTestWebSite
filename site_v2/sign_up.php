<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>회원가입</title>
    <style media="screen">
    <style>
      * {margin: 0; padding: 0;}
      #sign_up_box{
        width:400px;
        height:300px;
        border:solid 2px gray;
        position: absolute;
        left: 50%; top: 50%;
        margin-left: -200px;
        margin-top: -100px;
        background-color: orange;
      }
      #sign_up_button{
        position: absolute;
        left: 40%; top: 85%;
      }
      
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;

    </style>
    <script>
      function check_id(){
        var userid = document.getElementById("uid").value;
        if(userid)
	       {
		         url = "check.php?userid="+userid;
			     window.open(url,"아이디 중복 확인","top=300, left=750, width=300, height=100");
		     }
         else{
			        alert("아이디를 입력하세요");
		          }
	        }

      function check_nik(){
        var usernic = document.getElementById("nic").value;
        if(usernic)
         {
             url = "check.php?usernic="+usernic;
             window.open(url,"닉네임 중복 확인","top=300, left=750, width=300, height=100");
         }
         else{
              alert("닉네임을 입력하세요");
              }
          }

      function sign_up_ck(){
          var pw = document.getElementById("pw").value;
          var pw_ck = document.getElementById("pw_ck").value;
          var id_ch = document.getElementById("id_ch").value;
          var nik_ch = document.getElementById("nik_ch").value;
          var name = document.getElementById("name").value;
          var birthday = document.getElementById("birthday").value;
          var phone = document.getElementById("phone").value;
          var address = document.getElementById("address").value;
          var email = document.getElementById("email").value;
          const space = /\s/g
          const regpw = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/;
          const regemail = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;
          const regphone = /(01[016789])([1-9]{1}[0-9]{2,3})([0-9]{4})$/;
          const regname = /^[ㄱ-ㅎ|가-힣|a-z|A-Z|]+$/;
          
          
          
                      
            if(!space.test(pw) && !space.test(pw_ck) && !space.test(name) && !space.test(phone) && 
               !space.test(address) && !space.test(email))
            {
              if (pw=="")  {
                alert("비밀번호를 입력해주세요.");
              }
              else if(id_ch==0){
                alert("아이디 중복확인을 해주세요");
              }
              else if(nik_ch==0){
                alert("닉네임 중복확인을 해주세요");
              }
              else if(!regpw.test(pw)){
                  alert("비밀번호를 숫자, 대소문자, 특수문자를 이용하여 8자 이상 사용해야 합니다.");
              }
              else if(pw != pw_ck){
                alert("비밀번호가 일치하지 않습니다 확인해 주세요.");
              }else if(!regname.test(name)) {
                  alert("이름 형식이 맞지 않습니다..");
              }else if(birthday == ""){
                  alert("생년월일을 입력해주세요.");
              }else if(!regphone.test(phone)) {
                  alert("전화번호 형식이 맞지 않습니다.");
              }else if(address == "") {
                  alert("주소를 입력해주세요.");
              }else if(!regemail.test(email)) {
                  alert("이메일 형식이 맞지 않습니다.");
              }
              else{
                document.getElementById("sign").submit();
              }
            } else {
                alert("입력값에 공백이 있습니다.");
            }
      }
      
      function filterNumber(event) {
            var code = event.keyCode; 
            if (code > 47 && code < 58) {
                return;
            } 
            event.preventDefault();
        }
    </script>
  </head>
  <body>
    <div id="sign_up_box">


    <form class="" action="sign_up_search.php" method="post" id="sign">
      <table>
        <tr>
          <td>아이디</td>
          <td>
            <input type="text" name="id" id="uid">
          </td>
          <td>
            <button type="button" name="button" onclick="check_id()">중복확인</button>
            <input type="hidden" id="id_ch" name="" value="0">
          </td>
        </tr>
        <tr>
          <td>비밀번호</td>
          <td>
            <input type="password" id="pw" name="passw">
          </td>
        </tr>
        <tr>
          <td>비밀번호 확인</td>
          <td>
            <input type="password" id="pw_ck" name="pass_check">
          </td>
        </tr>
        <tr>
          <td>닉네임</td>
          <td>
            <input type="text" name="nic" id="nic">
          </td>
          <td>
            <button type="button" name="button" onclick="check_nik()">중복확인</button>
            <input type="hidden" id="nik_ch" name="" value="0">
          </td>
        </tr>
        <tr>
          <td>이름</td>
          <td>
            <input type="text" id="name" name="name">
          </td>
        </tr>
        
        <tr>
          <td>생년월일</td>
          <td>
            <input type="date" id="birthday" name="birthday">
          </td>
        </tr>
        
        <tr>
          <td>전화번호</td>
          <td>
            <input type="text" id="phone" name="phone" maxlength="11" placeholder = "'-'빼고 입력하세요." onKeyup="filterNumber">
          </td>
        </tr>
        
        <tr>
          <td>주소</td>
          <td>
            <input type="text" id="address" name="address" placeholder = "동만 써주세요 ex)구로동">
          </td>
        </tr>

        <tr>
          <td>이메일</td>
          <td>
            <input type="email" id="email" name="email">
          </td>
        </tr>
        
      </table>
      <button id="sign_up_button" type="button" name="button" align="right" onclick="sign_up_ck()">회원가입</button>

    </form>
    </div>
  </body>
</html>
